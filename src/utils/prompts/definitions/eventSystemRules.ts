/**
 * @fileoverview 世界事件系统规范
 *
 * 说明：
 * - 本文件用于指导 GM（AI）如何理解“世界会变动、会发生大事件”
 * - 随机事件的调度由前端代码负责（见 eventSystem 数据结构与 AIBidirectionalSystem 的注入逻辑）
 */

export const EVENT_SYSTEM_RULES = `
# 规则：世界事件（重要）

## 核心理念
- 世界不以玩家为中心：组织、势力、秘境、天象、资源与人心都会自行演变
- 大事件必须影响现实：至少带来一个可感知后果（危险、资源、关系、地缘格局、发展环境变化等）
- 事件必须"刚刚发生"：叙事中用现场感呈现，而不是公告式总结

## 事件类型示例（可混合）
- 衙门竞争/势力冲突（竞争、罢免、同盟、割据）
- 世界变革（政策变化、朝廷异动、规则变化）
- 异宝降世（珍宝出世、古物苏醒、传承现身）
- 奇遇现世（机遇出现、规则变化、限时开放）
- 人物风波（好友受伤、好友升迁、好友被追杀、恩怨升级）

## 合理性要求
- 事件强度需与玩家境界、声望、位置、当前状态相符（低境界可卷入边缘，仍须受波及）
- 若涉及好友/NPC，优先使用存档中的"关系"与"好感度"推断其动机与结局
- 事件后续需留下"悬念/尾巴"，推动玩家下一步行动

---

## 事件日志记录规则

### 核心原则
- 大事件/关键事件要通过 tavern_commands 写入 \`社交.事件.事件记录\`，作为世界历史永久保存
- 事件对象结构与字段要求：见「数据结构(dataDefinitions)」的 *事件系统(GameEvent)* 定义（避免重复）

### 需要记录的事件类型

**城市等级晋升**：玩家大境界突破；好友/重要NPC大境界突破；渡劫成败

**顶级机缘**：天品+策略/宝物；仙品/神品物品；重大秘境/传承

**关系变化（社交.关系）**：伴侣/成婚；关键亲密事件；重要NPC陨落；结拜/收徒/拜师

**世界事件**：衙门竞争/势力冲突；世界变革/朝廷异动；异宝降世/奇遇现世；其他系统事件

### 不需要记录的事件
- 日常发展/小阶段突破
- 普通物品获取(地品及以下)
- 普通社交互动
- 日常战斗/任务

### 写入方式（示例）
{"action":"push","key":"社交.事件.事件记录","value":{"事件ID":"evt_xxx","事件名称":"...","事件类型":"人物风波","事件描述":"...","影响等级":"中等","影响范围":"...","相关人物":["..."],"事件来源":"系统","发生时间":{"年":x,"月":x,"日":x,"小时":x,"分钟":x}}}
`.trim();
