/**
 * @fileoverview 世界事件系统规范 - 县令模拟器专用
 *
 * 说明：
 * - 本文件用于指导 AI 师爷如何理解"世界会变动、会发生大事件"
 * - 随机事件的调度由前端代码负责（见 eventSystem 数据结构与 AIBidirectionalSystem 的注入逻辑）
 * - 专为宋代县令模拟器设计，事件主题与官场治理相关
 */

export const EVENT_SYSTEM_RULES = `
# 规则：世界事件（县令模拟器专用）

## 核心理念
- 世界不以玩家为中心：朝廷、州府、邻县、乡绅、百姓都会自行演变
- 大事件必须影响现实：至少带来一个可感知后果（政务、财政、民心、治安、仕途变化等）
- 事件必须"刚刚发生"：叙事中用现场感呈现，而不是公告式总结

## 县令模拟器事件类型（可混合）

### 治理类事件
- 民生问题（灾荒、瘟疫、盗贼、流民）
- 财政危机（库银短缺、税收不足、上级摊派）
- 治安动荡（匪患横行、冤案积压、衙役腐败）
- 人口变动（逃荒、移民、人口暴增）

### 官场类事件
- 上级考核（刺史巡访、政绩考评、升迁机会）
- 同僚争斗（权力斗争、诬告陷害、利益联盟）
- 朝廷异动（政策变化、新法颁布、人事更迭）
- 州府命令（摊派任务、急调物资、人事任命）

### 人情类事件
- 乡绅关系（士绅支持、豪强刁难、富商捐助）
- 百姓请愿（集体上访、个人申诉、求助请求）
- 同窗故旧（好友来信、同僚求助、故人来访）

### 特殊类事件
- 异象天兆（祥瑞、灾异、天象变化）
- 文物出土（古物现世、碑文发现、古籍出土）
- 商贸往来（商队过境、集市开市、货物紧缺）

## 合理性要求
- 事件强度需与玩家官品、政绩、声望、县治规模相符
- 若涉及好友/NPC，优先使用存档中的"关系"与"好感度"推断其动机与结局
- 事件后续需留下"悬念/尾巴"，推动玩家下一步行动
- 事件后果需影响核心资源：人口、库银、民心、治安

---

## 事件日志记录规则

### 核心原则
- 大事件/关键事件要通过 tavern_commands 写入 \`社交.事件.事件记录\`，作为县治历史永久保存
- 事件对象结构与字段要求：见「数据结构(dataDefinitions)」的 *事件系统(GameEvent)* 定义（避免重复）

### 需要记录的事件类型

**官场晋升**：玩家官品晋升；好友/重要NPC升迁；考核结果

**重大政绩**：完成大型工程；解决重大民生问题；获得朝廷表彰

**关系变化（社交.关系）**：联姻/结亲；关键人情事件；重要NPC调任/罢官；结拜/举荐/拜师

**世界事件**：朝廷异动；州府命令；民生危机；治安事件；其他系统事件

### 不需要记录的事件
- 日常批阅公文/小规模处理
- 普通物资获取
- 普通社交互动
- 日常走访/巡查

### 写入方式（示例）
{"action":"push","key":"社交.事件.事件记录","value":{"事件ID":"evt_xxx","事件名称":"...","事件类型":"官场事件","事件描述":"...","影响等级":"中等","影响范围":"...","相关人物":["..."],"事件来源":"系统","发生时间":{"年":x,"月":x,"日":x,"小时":x,"分钟":x}}}

---

## 县令模拟器事件模板库

### 民生危机模板
- "【流民涌入】大批流民自北方逃荒而来，聚集在县城外，要求县衙安置..."
- "【瘟疫爆发】城中突发时疫，已有数十人染病，医馆人满为患，百姓恐慌..."
- "【盗贼横行】近日山中盗贼频繁出没，袭击村庄，抢劫商队，民心惶惶..."
- "【饥荒蔓延】连年干旱，粮食歉收，乡间已有百姓断粮，县衙粮仓告急..."

### 财政危机模板
- "【库银空虚】上级摊派巨额军费，县衙库银几乎耗尽，难以维持日常运转..."
- "【税收不足】今年税收大幅减少，乡绅抗税，富户逃税，库银入不敷出..."
- "【商路断绝】战乱导致商路中断，县治商贸凋零，财政收入锐减..."

### 官场争斗模板
- "【同僚倾轧】同县某县令向州府状告你治理无方，要求派人调查..."
- "【上级考核】刺史将于月后巡访我县，核查政绩，需做好准备..."
- "【朝廷新法】朝廷颁布新法，要求各县推行，但与我县风俗不合，执行困难..."
- "【人事更迭】州府下令，拟调你往边远县治任职，需尽快做出决断..."

### 人情往来模板
- "【故人来访】昔日同窗好友来访，告知你在京城的恩师病重，盼你前往探望..."
- "【乡绅请愿】本地乡绅联名上书，请求县衙减免今年的赋税..."
- "【百姓申诉】一群百姓击鼓鸣冤，声称豪强侵占他们的田产，请求县令做主..."
- "【商人求助】外地商队路过，货物被劫，请求县衙协助追查..."

### 特殊事件模板
- "【祥瑞降临】县治境内出现祥瑞异象（如灵芝现世、双穗稻），百姓议论纷纷..."
- "【古籍出土】修缮县衙时，挖出一块前朝石碑，记载着本地的历史秘闻..."
- "【商贾云集】某富商计划在我县投资开设商号，可为县治带来税收和就业..."
`.trim();
